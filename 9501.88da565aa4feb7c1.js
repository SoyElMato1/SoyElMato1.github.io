"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9501],{9501:(w,m,u)=>{u.r(m),u.d(m,{RecuperarPageModule:()=>b});var g=u(177),s=u(4341),l=u(4742),p=u(6766),d=u(467),e=u(3953),h=u(459);function v(t,n){1&t&&(e.j41(0,"p"),e.EFF(1,"La contrase\xf1a es obligatoria."),e.k0s())}function R(t,n){1&t&&(e.j41(0,"p"),e.EFF(1,"Debe tener al menos 8 caracteres."),e.k0s())}function F(t,n){if(1&t&&(e.j41(0,"div",7),e.DNE(1,v,2,0,"p",8)(2,R,2,0,"p",8),e.k0s()),2&t){let i,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(i=o.resetForm.get("password"))||null==i.errors?null:i.errors.required),e.R7$(),e.Y8G("ngIf",null==(r=o.resetForm.get("password"))||null==r.errors?null:r.errors.minlength)}}const P=[{path:"",component:(()=>{var t;class n{constructor(r,o,a,c,f){this.route=r,this.authService=o,this.formBuilder=a,this.toastController=c,this.router=f,this.token="",this.resetForm=this.formBuilder.group({password:["",[s.k0.required,s.k0.minLength(8)]]})}ngOnInit(){this.route.queryParams.subscribe(r=>{this.token=r.token,this.token||(this.showToast("Token no encontrado en la URL.","danger"),this.router.navigate(["/login"]))})}onSubmit(){var r=this;return(0,d.A)(function*(){if(r.resetForm.invalid)return void r.showToast("La contrase\xf1a debe tener al menos 8 caracteres.","warning");const{password:o}=r.resetForm.value;var a;r.authService.updatePassword(r.token,o).subscribe({next:(a=(0,d.A)(function*(){r.showToast("Contrase\xf1a actualizada correctamente.","success"),r.router.navigate(["/login"])}),function(){return a.apply(this,arguments)}),error:function(){var a=(0,d.A)(function*(c){console.error("Error al actualizar la contrase\xf1a:",c),r.showToast("Error al actualizar la contrase\xf1a.","danger")});return function(f){return a.apply(this,arguments)}}()})})()}showToast(r,o){var a=this;return(0,d.A)(function*(){yield(yield a.toastController.create({message:r,duration:2e3,position:"top",color:o})).present()})()}togglePasswordVisibility(){const r=document.querySelector('ion-input[type="password"]');r&&(r.type="password"===r.type?"text":"password")}}return(t=n).\u0275fac=function(r){return new(r||t)(e.rXU(p.nX),e.rXU(h.P),e.rXU(s.ok),e.rXU(l.K_),e.rXU(p.Ix))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-recuperar"]],decls:12,vars:3,consts:[[1,"reset-password-container"],[3,"ngSubmit","formGroup"],["position","stacked"],["formControlName","password","type","password","placeholder","Ingresa tu nueva contrase\xf1a"],["name","eye","slot","end",3,"click"],["class","error",4,"ngIf"],["expand","block","type","submit",3,"disabled"],[1,"error"],[4,"ngIf"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"h2"),e.EFF(2,"Restablecer Contrase\xf1a"),e.k0s(),e.j41(3,"form",1),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(4,"ion-item")(5,"ion-label",2),e.EFF(6,"Nueva Contrase\xf1a"),e.k0s(),e.nrm(7,"ion-input",3),e.j41(8,"ion-icon",4),e.bIt("click",function(){return o.togglePasswordVisibility()}),e.k0s()(),e.DNE(9,F,3,2,"div",5),e.j41(10,"ion-button",6),e.EFF(11," Actualizar Contrase\xf1a "),e.k0s()()()),2&r){let a;e.R7$(3),e.Y8G("formGroup",o.resetForm),e.R7$(6),e.Y8G("ngIf",(null==(a=o.resetForm.get("password"))?null:a.touched)&&(null==(a=o.resetForm.get("password"))?null:a.invalid)),e.R7$(),e.Y8G("disabled",o.resetForm.invalid)}},dependencies:[g.bT,s.qT,s.BC,s.cb,l.Jm,l.iq,l.$w,l.uz,l.he,l.Gw,s.j4,s.JD]}),n})()}];let y=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(P),p.iI]}),n})(),b=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,s.YN,l.bv,y,s.X1]}),n})()}}]);
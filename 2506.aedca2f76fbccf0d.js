"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2506],{2506:(w,p,c)=>{c.r(p),c.d(p,{HistorialCompraPageModule:()=>H});var g=c(177),i=c(4341),d=c(4742),u=c(6766),m=c(467),o=c(3953),f=c(3114);const h=(t,e)=>({"table-row-even":t,"table-row-odd":e});function b(t,e){1&t&&(o.j41(0,"div",24),o.EFF(1," El RUT es obligatorio y debe ser v\xe1lido. "),o.k0s())}function C(t,e){1&t&&(o.j41(0,"div",24),o.EFF(1," La contrase\xf1a es obligatoria "),o.k0s())}function _(t,e){if(1&t&&(o.j41(0,"li"),o.nrm(1,"strong"),o.EFF(2),o.k0s()),2&t){const a=e.$implicit;o.R7$(2),o.Lme(" ",a.nombre,", Cantidad: ",a.cantidad," ")}}function F(t,e){if(1&t&&(o.j41(0,"ion-row",29)(1,"ion-col"),o.EFF(2),o.nI1(3,"date"),o.k0s(),o.j41(4,"ion-col"),o.EFF(5),o.k0s(),o.j41(6,"ion-col"),o.EFF(7),o.nI1(8,"currency"),o.k0s(),o.j41(9,"ion-col"),o.EFF(10),o.k0s(),o.j41(11,"ion-col")(12,"ul"),o.DNE(13,_,3,2,"li",30),o.k0s()()()),2&t){const a=e.$implicit,n=e.index,r=o.XpG(2);o.Y8G("ngClass",o.l_i(11,h,n%2==0,n%2!=0)),o.R7$(2),o.JRh(o.i5U(3,6,a.orden_date,"dd/MM/yyyy HH:mm")),o.R7$(3),o.JRh(r.rut),o.R7$(2),o.JRh(o.bMT(8,9,a.total)),o.R7$(3),o.JRh(a.pagado?"Pagado":"Rechazado"),o.R7$(3),o.Y8G("ngForOf",a.items)}}function P(t,e){if(1&t&&(o.j41(0,"div",25)(1,"h2",26),o.EFF(2,"Historial de Compras"),o.k0s(),o.j41(3,"ion-grid")(4,"ion-row",27)(5,"ion-col"),o.EFF(6,"Fecha de Compra"),o.k0s(),o.j41(7,"ion-col"),o.EFF(8,"Cliente"),o.k0s(),o.j41(9,"ion-col"),o.EFF(10,"Total"),o.k0s(),o.j41(11,"ion-col"),o.EFF(12,"Estado de Pago"),o.k0s(),o.j41(13,"ion-col"),o.EFF(14,"Productos"),o.k0s()(),o.DNE(15,F,14,14,"ion-row",28),o.k0s()()),2&t){const a=o.XpG();o.R7$(15),o.Y8G("ngForOf",a.orders)}}function v(t,e){1&t&&(o.j41(0,"div",31)(1,"p"),o.EFF(2,"No tienes \xf3rdenes en tu historial"),o.k0s()())}const k=[{path:"",component:(()=>{var t;class e{constructor(n,r,l,s){this.formBuilder=n,this.toastController=r,this.router=l,this.productoService=s,this.orders=[],this.rut="",this.contrasena="",this.showPasswordHistorial=!1,this.HistorialForm=this.formBuilder.group({rut:["",[i.k0.required,i.k0.pattern("^[0-9]+$"),i.k0.minLength(7),i.k0.maxLength(8)]],password:["",[i.k0.required,i.k0.minLength(8),i.k0.maxLength(12)]]})}ngOnInit(){}togglePasswordVisibility(n){"vercontrase\xf1a"===n&&(this.showPasswordHistorial=!this.showPasswordHistorial)}campo(n){return this.HistorialForm.get(n)}campoTocado(n){var r;return null===(r=this.HistorialForm.get(n))||void 0===r?void 0:r.touched}verificarHistorial(){var n=this;return(0,m.A)(function*(){if(n.HistorialForm.invalid)return void(yield n.toastController.create({message:"Ingrese un RUT v\xe1lido.",duration:2e3,position:"top"})).present();const r=n.HistorialForm.value.username;console.log("Buscar historial de compras para RUT:",r),n.router.navigate(["/historial-compras",{rut:r}])})()}consultarHistorial(){(this.rut||this.contrasena)&&this.productoService.getHistorial(this.rut).subscribe({next:n=>{this.orders=n,this.orders.forEach(r=>{r.items.forEach(l=>{this.productoService.productoId(l.producto_id).subscribe({next:s=>l.nombre=s.nombre_producto,error:s=>console.error(`No se pudo obtener el producto con ID ${l.producto_id}`)})})})},error:n=>console.error("Error al obtener el historial:",n)})}}return(t=e).\u0275fac=function(n){return new(n||t)(o.rXU(i.ok),o.rXU(d.K_),o.rXU(u.Ix),o.rXU(f.P))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-historial-compra"]],decls:40,vars:10,consts:[[3,"fullscreen"],[1,"bigimage"],[1,"container-fluid"],[1,"row"],[1,"col-md-4","m-0","p-0","mt-5"],[1,"form-container"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-4","titular","text-center"],[1,"form-group","mb-3"],[1,"label","mb-2"],["formControlName","rut","placeholder","Ej: 12345678",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["formControlName","contrasena","placeholder","contrase\xf1a",1,"form-control",3,"ngModelChange","ngModel","type"],["slot","end",2,"cursor","pointer",3,"click","name"],[1,"btn","btn-primary",3,"click"],[1,"col-md-8"],["class","history-container mt-4",4,"ngIf"],["style","color: black; font-size: 30px; font-weight: bold;","class","text-center mt-4",4,"ngIf"],[1,"footer"],[1,"container"],[1,"float-end"],["href","#",1,"back-to-top"],[1,"footer-text"],["href","#"],[1,"text-danger"],[1,"history-container","mt-4"],[1,"text-center","titular"],[1,"table-header"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngFor","ngForOf"],[1,"text-center","mt-4",2,"color","black","font-size","30px","font-weight","bold"]],template:function(n,r){if(1&n&&(o.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),o.bIt("ngSubmit",function(){return r.verificarHistorial()}),o.j41(7,"h2",7),o.EFF(8,"Consulta Historial de Compras"),o.k0s(),o.j41(9,"div",8)(10,"label",9),o.EFF(11,"Ingrese su RUT"),o.k0s(),o.j41(12,"ion-input",10),o.mxI("ngModelChange",function(s){return o.DH7(r.rut,s)||(r.rut=s),s}),o.k0s(),o.DNE(13,b,2,0,"div",11),o.k0s(),o.j41(14,"div",8)(15,"label",9),o.EFF(16,"Ingrese su contrase\xf1a"),o.k0s(),o.j41(17,"ion-input",12),o.mxI("ngModelChange",function(s){return o.DH7(r.contrasena,s)||(r.contrasena=s),s}),o.j41(18,"ion-icon",13),o.bIt("click",function(){return r.togglePasswordVisibility("vercontrase\xf1a")}),o.k0s()(),o.DNE(19,C,2,0,"div",11),o.k0s(),o.j41(20,"button",14),o.bIt("click",function(){return r.consultarHistorial()}),o.EFF(21,"Consultar Historial"),o.k0s()()()(),o.j41(22,"div",15),o.DNE(23,P,16,1,"div",16)(24,v,3,0,"div",17),o.k0s()()()(),o.j41(25,"footer",18)(26,"div",19)(27,"p",20)(28,"a",21),o.EFF(29,"Volver arriba"),o.k0s()(),o.j41(30,"p",22),o.EFF(31," \xa9 2024 "),o.j41(32,"strong"),o.EFF(33,"GreenMarket"),o.k0s(),o.EFF(34," Portafolio. "),o.j41(35,"a",23),o.EFF(36,"Privacidad"),o.k0s(),o.EFF(37," \xb7 "),o.j41(38,"a",23),o.EFF(39,"T\xe9rminos"),o.k0s()()()()()),2&n){let l,s;o.Y8G("fullscreen",!0),o.R7$(6),o.Y8G("formGroup",r.HistorialForm),o.R7$(6),o.R50("ngModel",r.rut),o.R7$(),o.Y8G("ngIf",(null==(l=r.campo("rut"))?null:l.invalid)&&r.campoTocado("rut")),o.R7$(4),o.R50("ngModel",r.contrasena),o.Y8G("type",r.showPasswordHistorial?"text":"password"),o.R7$(),o.Y8G("name",r.showPasswordHistorial?"eye-off":"eye"),o.R7$(),o.Y8G("ngIf",(null==(s=r.campo("contrasena"))?null:s.invalid)&&r.campoTocado("contrasena")),o.R7$(4),o.Y8G("ngIf",r.orders&&r.orders.length>0),o.R7$(),o.Y8G("ngIf",r.orders&&0===r.orders.length)}},dependencies:[g.YU,g.Sq,g.bT,i.qT,i.BC,i.cb,i.j4,i.JD,d.hU,d.W9,d.lO,d.iq,d.$w,d.ln,d.Gw,g.oe,g.vh],styles:['@charset "UTF-8";.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;background:#a0d683;color:#000;height:1000px;max-height:100%}.btn-primary[_ngcontent-%COMP%]{background-color:#feff9f;border-color:#a0d683;color:#000}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#72bf78;border-color:#72bf78}.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;border-color:#333}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#72bf78;color:#000;border-color:#feff9f}.col-md-4[_ngcontent-%COMP%]{margin:0!important}.history-container[_ngcontent-%COMP%]{padding:20px;color:#000;border-radius:15px;font-weight:700}.bigimage[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:#f5f5f5;margin:0;padding:0}.titular[_ngcontent-%COMP%]{font-family:Bebas Neue,sans-serif;background-color:#72bf78;color:#000;text-align:center;font-weight:700;font-size:34px;padding:10px;border-radius:10px}.label[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#000}.text-danger[_ngcontent-%COMP%]{color:red;font-size:14px}.table-header[_ngcontent-%COMP%]{font-weight:700;background-color:#72bf78;color:#000;padding:10px 0;border-radius:8px}.table-row[_ngcontent-%COMP%]{background-color:#f9f9f9;color:#000;padding:10px 0;border-bottom:1px solid #ddd;opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_slideFadeIn .5s ease forwards}.table-row[_ngcontent-%COMP%]:nth-child(1){animation-delay:.5s}.table-row[_ngcontent-%COMP%]:nth-child(2){animation-delay:1s}.table-row[_ngcontent-%COMP%]:nth-child(3){animation-delay:1.5s}.table-row-even[_ngcontent-%COMP%]{background-color:#a0d683}.table-row-odd[_ngcontent-%COMP%]{background-color:#72bf78}.table-row-even[_ngcontent-%COMP%]:hover, .table-row-odd[_ngcontent-%COMP%]:hover{background-color:#feff9f;cursor:pointer}@keyframes _ngcontent-%COMP%_slideFadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.footer[_ngcontent-%COMP%]{background:#72bf78;color:#000;text-align:center;padding:20px 0;box-shadow:0 -4px 10px #0000001a}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#feff9f;text-decoration:none;font-weight:700}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.footer-text[_ngcontent-%COMP%]{font-size:14px;margin:0}.footer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#a0d683}.back-to-top[_ngcontent-%COMP%]{background-color:#a0d683;color:#000;padding:8px 12px;border-radius:5px;font-size:12px;font-weight:700;text-decoration:none;transition:all .3s}.back-to-top[_ngcontent-%COMP%]:hover{background-color:#feff9f;color:#000}']}),e})()}];let M=(()=>{var t;class e{}return(t=e).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[u.iI.forChild(k),u.iI]}),e})(),H=(()=>{var t;class e{}return(t=e).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[g.MD,i.X1,i.YN,d.bv,M]}),e})()}}]);
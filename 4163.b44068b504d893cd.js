"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4163],{4163:(I,_,d)=>{d.r(_),d.d(_,{LoginPageModule:()=>M});var h=d(177),r=d(4341),a=d(4742),p=d(6766),m=d(467),e=d(3953),v=d(459),F=d(8513);function b(o,l){1&o&&(e.j41(0,"div")(1,"ion-text",22),e.EFF(2,"El nombre de usuario o rut es obligatorio y debe ser un rut v\xe1lido."),e.k0s()())}function k(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",8)(1,"ion-card",9)(2,"form",10)(3,"div",11),e.EFF(4," Inicio de sesion "),e.k0s(),e.j41(5,"span",12)(6,"label",13),e.EFF(7,"Nombre de Usuario o RUT"),e.k0s(),e.j41(8,"ion-input",14),e.bIt("keydown.enter",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.login())}),e.k0s(),e.DNE(9,b,3,0,"div",15),e.k0s(),e.j41(10,"span",12)(11,"label",16),e.EFF(12,"Contrase\xf1a"),e.k0s(),e.j41(13,"ion-input",17),e.bIt("keydown.enter",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.login())}),e.j41(14,"ion-icon",18),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.togglePasswordVisibility("login"))}),e.k0s()()(),e.j41(15,"ion-buttons")(16,"ion-button",19),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.login())}),e.EFF(17,"Login"),e.k0s()(),e.j41(18,"span",20),e.EFF(19,"\xbfNo tienes cuenta? "),e.k0s(),e.j41(20,"ion-buttons")(21,"ion-button",21),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.handleButtonClick())}),e.EFF(22),e.k0s()(),e.nrm(23,"br"),e.k0s()()()}if(2&o){let i;const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.loginForm),e.R7$(7),e.Y8G("ngIf",(null==(i=t.loginForm.get("username"))?null:i.invalid)&&(null==(i=t.loginForm.get("username"))?null:i.touched)),e.R7$(4),e.Y8G("type",t.showPasswordLogin?"text":"password"),e.R7$(),e.Y8G("name",t.showPasswordLogin?"eye-off":"eye"),e.R7$(8),e.SpI(" ",t.showCrudForm?"Cancelar":"Registrate"," ")}}function x(o,l){1&o&&(e.j41(0,"div")(1,"ion-text",22),e.EFF(2,"El RUT es obligatorio."),e.k0s()())}function P(o,l){1&o&&(e.j41(0,"div")(1,"ion-text",22),e.EFF(2,"El dv es obligatorio."),e.k0s()())}function y(o,l){1&o&&(e.j41(0,"div")(1,"ion-text",22),e.EFF(2,"El correo es obligatorio y debe ser v\xe1lido."),e.k0s()())}function w(o,l){1&o&&(e.j41(0,"div")(1,"ion-text",22),e.EFF(2,"La contrase\xf1a es obligatoria y debe tener al menos 8 caracteres."),e.k0s()())}function C(o,l){1&o&&(e.j41(0,"div")(1,"ion-text",22),e.EFF(2,"El nombre es obligatorio y debe contener solo letras."),e.k0s()())}function j(o,l){1&o&&(e.j41(0,"div")(1,"ion-text",22),e.EFF(2,"El apellido es obligatorio y debe contener solo letras."),e.k0s()())}function L(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",8)(1,"ion-card",9)(2,"form",10)(3,"div",11),e.EFF(4," Registrate aqu\xed "),e.k0s(),e.j41(5,"ion-label",23),e.EFF(6,"RUT"),e.k0s(),e.j41(7,"ion-row")(8,"ion-col",24),e.nrm(9,"ion-input",25),e.k0s(),e.j41(10,"ion-col",26),e.nrm(11,"ion-input",27),e.k0s()(),e.DNE(12,x,3,0,"div",15)(13,P,3,0,"div",15),e.j41(14,"ion-label",23),e.EFF(15,"Correo Electr\xf3nico"),e.k0s(),e.nrm(16,"ion-input",28),e.DNE(17,y,3,0,"div",15),e.j41(18,"ion-label",23),e.EFF(19,"Contrase\xf1a"),e.k0s(),e.j41(20,"ion-input",29)(21,"ion-icon",18),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.togglePasswordVisibility("register"))}),e.k0s()(),e.DNE(22,w,3,0,"div",15),e.j41(23,"ion-label",23),e.EFF(24,"Nombre"),e.k0s(),e.nrm(25,"ion-input",30),e.DNE(26,C,3,0,"div",15),e.j41(27,"ion-label",23),e.EFF(28,"Apellido"),e.k0s(),e.nrm(29,"ion-input",31),e.DNE(30,j,3,0,"div",15),e.j41(31,"ion-buttons")(32,"ion-button",19),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onRegister())}),e.EFF(33,"Registrar proveedor"),e.k0s()(),e.j41(34,"span",20),e.EFF(35,"\xbfYa tienes cuenta? "),e.k0s(),e.j41(36,"ion-buttons")(37,"ion-button",21),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.handleButtonClick())}),e.EFF(38),e.k0s()(),e.nrm(39,"br"),e.k0s()()()}if(2&o){let i,t,n,g,c,u;const s=e.XpG();e.R7$(2),e.Y8G("formGroup",s.registerForm),e.R7$(10),e.Y8G("ngIf",(null==(i=s.registerForm.get("rut"))?null:i.invalid)&&(null==(i=s.registerForm.get("rut"))?null:i.touched)),e.R7$(),e.Y8G("ngIf",(null==(t=s.registerForm.get("dv"))?null:t.invalid)&&(null==(t=s.registerForm.get("dv"))?null:t.touched)),e.R7$(4),e.Y8G("ngIf",(null==(n=s.registerForm.get("correo_electronico"))?null:n.invalid)&&(null==(n=s.registerForm.get("correo_electronico"))?null:n.touched)),e.R7$(3),e.Y8G("type",s.showPasswordRegister?"text":"password"),e.R7$(),e.Y8G("name",s.showPasswordRegister?"eye-off":"eye"),e.R7$(),e.Y8G("ngIf",(null==(g=s.registerForm.get("contrasena"))?null:g.invalid)&&(null==(g=s.registerForm.get("contrasena"))?null:g.touched)),e.R7$(4),e.Y8G("ngIf",(null==(c=s.registerForm.get("nom_user"))?null:c.invalid)&&(null==(c=s.registerForm.get("nom_user"))?null:c.touched)),e.R7$(4),e.Y8G("ngIf",(null==(u=s.registerForm.get("ap_user"))?null:u.invalid)&&(null==(u=s.registerForm.get("ap_user"))?null:u.touched)),e.R7$(8),e.SpI(" ",s.showCrudForm?"Inicia sesi\xf3n":""," ")}}const E=[{path:"",component:(()=>{var o;class l{handleButtonClick(){this.toggleCrudForm(),this.toggleLoginForm()}togglePasswordVisibility(t){"login"===t?this.showPasswordLogin=!this.showPasswordLogin:"register"===t&&(this.showPasswordRegister=!this.showPasswordRegister)}constructor(t,n,g,c,u){this.router=t,this.authservice=n,this.proveedorService=g,this.formBuilder=c,this.toast=u,this.username="",this.password="",this.proveedores=[],this.item={rut:"",dv:"",correo_electronico:"",contrasena:"",nom_user:"",ap_user:""},this.showCrudForm=!0,this.showLoginForm=!1,this.showPasswordLogin=!1,this.showPasswordRegister=!1,this.loginForm=this.formBuilder.group({username:["",[r.k0.required]],password:["",[r.k0.required,r.k0.minLength(8),r.k0.maxLength(12)]]}),this.registerForm=this.formBuilder.group({rut:["",[r.k0.required,r.k0.pattern("^[0-9]+$"),r.k0.minLength(7),r.k0.maxLength(8)]],dv:["",[r.k0.required,r.k0.pattern("^[0-9Kk]{1}$")]],correo_electronico:["",[r.k0.required,r.k0.email]],contrasena:["",[r.k0.required,r.k0.minLength(8)]],nom_user:["",[r.k0.required,r.k0.pattern("^[a-zA-Z\xf1\xd1]+$")]],ap_user:["",[r.k0.required,r.k0.pattern("^[a-zA-Z\xf1\xd1]+$")]]})}ngOnInit(){}campo(t){return this.loginForm.get(t)}campoTocado(t){var n;return null===(n=this.loginForm.get(t))||void 0===n?void 0:n.touched}toggleLoginForm(){this.showLoginForm=!this.showLoginForm,this.showLoginForm||(this.loginForm.reset(),this.loginForm.updateValueAndValidity())}login(){var t=this;return(0,m.A)(function*(){if(t.loginForm.invalid)return void(yield t.toast.create({message:"Rellene los campos",position:"top",duration:2e3})).present();const{username:n,password:g}=t.loginForm.value;t.authservice.login(n,g).subscribe(function(){var c=(0,m.A)(function*(u){if(u){const f=u.user.rol,G={rol:f};localStorage.setItem("authToken",u.token),localStorage.setItem("user_data",JSON.stringify(G)),yield(yield t.toast.create({header:"Bienvenido Usuario",position:"top",duration:2e3})).present(),t.router.navigate("admin"===f?["/panel-administrador"]:"proveedor"===f?["/panel-proveedor"]:["/home"]),t.loginForm.reset(),t.loginForm.updateValueAndValidity()}});return function(u){return c.apply(this,arguments)}}(),function(){var c=(0,m.A)(function*(u){console.error("Error en el login",u),(yield t.toast.create({message:"Error en el inicio de sesi\xf3n",position:"top",duration:2e3})).present()});return function(u){return c.apply(this,arguments)}}())})()}toggleCrudForm(){this.showCrudForm=!this.showCrudForm,this.showCrudForm||(this.registerForm.reset(),this.registerForm.updateValueAndValidity())}onRegister(){var t=this;return(0,m.A)(function*(){var n;t.registerForm.invalid?(yield t.toast.create({message:"Rellene los campos",position:"top",duration:2e3})).present():t.authservice.registerProveedor(t.registerForm.value).subscribe({next:(n=(0,m.A)(function*(g){console.log("Proveedor registrado exitosamente",g),t.registerForm.reset(),t.registerForm.updateValueAndValidity(),(yield t.toast.create({message:"Proveedor registrado correctamente",position:"top",duration:2e3})).present()}),function(c){return n.apply(this,arguments)}),error:function(){var n=(0,m.A)(function*(g){console.error("Error al registrar proveedor",g),(yield t.toast.create({message:"Error al registrar el proveedor. Intente nuevamente.",position:"top",duration:2e3})).present()});return function(c){return n.apply(this,arguments)}}()})})()}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(p.Ix),e.rXU(v.P),e.rXU(F.m),e.rXU(r.ok),e.rXU(a.K_))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],decls:10,vars:3,consts:[[3,"translucent"],["color","A",1,"colormenus"],["slot","start"],["default-href","/proveedor"],[1,"titulo"],[1,"e-card","playing"],[1,"wave-full"],["class","margen",4,"ngIf"],[1,"margen"],[1,"container"],["novalidate","",1,"form",3,"formGroup"],[1,"titular"],[1,"input-span"],[1,"label"],["type","email","formControlName","username",3,"keydown.enter"],[4,"ngIf"],["for","password",1,"label"],["type","password","formControlName","password",3,"keydown.enter","type"],["slot","end",2,"cursor","pointer",3,"click","name"],["expand","block",1,"submit",3,"click"],[1,"span"],[1,"boton-cambiar",3,"click"],["color","danger"],["position","stacked",1,"label"],["size","9"],["type","text","formControlName","rut","placeholder","12345678"],["size","3"],["type","text","formControlName","dv","placeholder","0"],["type","email","formControlName","correo_electronico"],["type","password","formControlName","contrasena",3,"type"],["type","text","formControlName","nom_user"],["type","text","formControlName","ap_user"]],template:function(t,n){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"ion-title",4),e.EFF(5,"GreenMarket"),e.k0s()()(),e.j41(6,"ion-content",5)(7,"ion-grid",6),e.DNE(8,k,24,5,"div",7)(9,L,40,10,"div",7),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(8),e.Y8G("ngIf",n.showLoginForm),e.R7$(),e.Y8G("ngIf",n.showCrudForm))},dependencies:[h.bT,r.qT,r.BC,r.cb,a.Jm,a.QW,a.b_,a.hU,a.W9,a.lO,a.eU,a.iq,a.$w,a.he,a.ln,a.IO,a.BC,a.ai,a.Gw,a.el,r.j4,r.JD],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#72bf78;border-radius:20px;font-size:18px}.colormenus[_ngcontent-%COMP%]{background:#72bf78;color:#000}.titulo[_ngcontent-%COMP%]{font-weight:700;font-family:Bebas Neue,sans-serif;font-size:50px;color:#000;position:relative;text-align:start;display:flex;justify-content:start;align-items:start}.titular[_ngcontent-%COMP%]{background-color:#a0d683;color:#000;width:320px;height:60px;display:flex;justify-content:center;align-items:center;font-weight:700;text-align:center;position:relative;font-family:Bebas Neue,sans-serif;top:10px;font-size:40px;box-shadow:0 10px 10px #0000001a}.ajustar[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center}.centrar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.wave-full[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:#f5f5f5}ion-buttons[_ngcontent-%COMP%]{font-size:bold}.form[_ngcontent-%COMP%]{--bg-light: #efefef;--bg-dark: #707070;--clr: #58bc82;--clr-alpha: #9c9c9c60;display:flex;flex-direction:column;align-items:center;gap:1rem;width:100%;color:#000;font-weight:700;font-size:18px;padding:10px;max-width:500px;min-width:300px}.form[_ngcontent-%COMP%]   .input-span[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:.5rem}.form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:2px solid var(--clr)}.label[_ngcontent-%COMP%]{align-self:flex-start;color:#000;font-weight:600;font-weight:700;font-size:18px}.form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{padding:1rem .75rem;width:100%;display:flex;align-items:center;gap:.5rem;border-radius:3rem;background-color:#ff9;color:var(--bg-light);border:none;cursor:pointer;color:#000;font-size:18px;transition:all .3s;font-weight:700;font-size:.9rem}.span[_ngcontent-%COMP%]{text-decoration:none;color:red;opacity:70%}ion-input[_ngcontent-%COMP%]{background-color:#a0d683;font-size:large;font-weight:700;color:#000}.boton[_ngcontent-%COMP%]{--background-color: #FFFF99;--background: #FFFF99}.boton-cambiar[_ngcontent-%COMP%]{color:#1717ffd7;font-weight:700;text-decoration:underline}.title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.5em;font-weight:500;color:#f5f5f5}ion-label[_ngcontent-%COMP%]{align-self:flex-start;color:#f5f5f5;font-weight:600;font-size:18px}.margen[_ngcontent-%COMP%]{margin-top:50px}.cuadrado[_ngcontent-%COMP%]{width:100%;height:500px;background:#72bf78}']}),l})()}];let R=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(E),p.iI]}),l})(),M=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.MD,r.YN,a.bv,R,r.X1]}),l})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2761],{2761:(G,v,m)=>{m.r(v),m.d(v,{PanelAdministradorPageModule:()=>$});var _=m(177),s=m(4341),a=m(4742),p=m(6766),g=m(467),f=m(1626),e=m(3953),F=m(459),P=m(8513);function k(t,l){1&t&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Dashboard"),e.k0s(),e.j41(3,"p"),e.EFF(4,"Aqu\xed puedes mostrar estad\xedsticas, gr\xe1ficos, y otros res\xfamenes."),e.k0s()())}function b(t,l){if(1&t){const n=e.RV6();e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s(),e.j41(5,"ion-label"),e.EFF(6),e.k0s(),e.j41(7,"ion-label"),e.EFF(8),e.k0s(),e.j41(9,"div",14)(10,"ion-button",3),e.bIt("click",function(){const r=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.onEdit(r))}),e.EFF(11,"Editar"),e.k0s(),e.j41(12,"ion-button",3),e.bIt("click",function(){const r=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.onDelete(r))}),e.EFF(13,"Eliminar"),e.k0s()()()}if(2&t){const n=l.$implicit;e.R7$(2),e.Lme(" ",n.rut," - ",n.dv," "),e.R7$(2),e.SpI(" ",n.nombre," "),e.R7$(2),e.SpI(" ",n.apellido," "),e.R7$(2),e.SpI(" ",n.correo_electronico," ")}}function h(t,l){1&t&&(e.j41(0,"div")(1,"ion-text",26),e.EFF(2,"El RUT es obligatorio y debe ser num\xe9rico."),e.k0s()())}function E(t,l){1&t&&(e.j41(0,"div")(1,"ion-text",26),e.EFF(2,"El DV es obligatorio y debe ser un n\xfamero o 'K'."),e.k0s()())}function j(t,l){1&t&&(e.j41(0,"div")(1,"ion-text",26),e.EFF(2,"El correo es obligatorio y debe ser v\xe1lido."),e.k0s()())}function A(t,l){1&t&&(e.j41(0,"div")(1,"ion-text",26),e.EFF(2,"La contrase\xf1a es obligatoria y debe tener al menos 8 caracteres."),e.k0s()())}function I(t,l){1&t&&(e.j41(0,"div")(1,"ion-text",26),e.EFF(2,"El nombre es obligatorio y solo debe contener letras."),e.k0s()())}function C(t,l){1&t&&(e.j41(0,"div")(1,"ion-text",26),e.EFF(2,"El apellido es obligatorio y solo debe contener letras."),e.k0s()())}function y(t,l){if(1&t){const n=e.RV6();e.j41(0,"form",15)(1,"ion-item")(2,"ion-label",16),e.EFF(3,"RUT"),e.k0s(),e.j41(4,"ion-row")(5,"ion-col",17),e.nrm(6,"ion-input",18),e.k0s(),e.j41(7,"ion-col",19),e.nrm(8,"ion-input",20),e.k0s()(),e.DNE(9,h,3,0,"div",9)(10,E,3,0,"div",9),e.k0s(),e.j41(11,"ion-item")(12,"ion-label",16),e.EFF(13,"Correo Electr\xf3nico"),e.k0s(),e.nrm(14,"ion-input",21),e.DNE(15,j,3,0,"div",9),e.k0s(),e.j41(16,"ion-item")(17,"ion-label",16),e.EFF(18,"Contrase\xf1a"),e.k0s(),e.nrm(19,"ion-input",22),e.DNE(20,A,3,0,"div",9),e.k0s(),e.j41(21,"ion-item")(22,"ion-label",16),e.EFF(23,"Nombre"),e.k0s(),e.nrm(24,"ion-input",23),e.DNE(25,I,3,0,"div",9),e.k0s(),e.j41(26,"ion-item")(27,"ion-label",16),e.EFF(28,"Apellido"),e.k0s(),e.nrm(29,"ion-input",24),e.DNE(30,C,3,0,"div",9),e.k0s(),e.j41(31,"ion-button",25),e.bIt("click",function(){e.eBV(n);const r=e.XpG(2);return e.Njj(r.onSubmit())}),e.EFF(32,"Registrar Proveedor"),e.k0s()()}if(2&t){let n,o,r,i,c,u;const d=e.XpG(2);e.Y8G("formGroup",d.registerForm),e.R7$(9),e.Y8G("ngIf",(null==(n=d.registerForm.get("rut"))?null:n.invalid)&&(null==(n=d.registerForm.get("rut"))?null:n.touched)),e.R7$(),e.Y8G("ngIf",(null==(o=d.registerForm.get("dv"))?null:o.invalid)&&(null==(o=d.registerForm.get("dv"))?null:o.touched)),e.R7$(5),e.Y8G("ngIf",(null==(r=d.registerForm.get("correo_electronico"))?null:r.invalid)&&(null==(r=d.registerForm.get("correo_electronico"))?null:r.touched)),e.R7$(5),e.Y8G("ngIf",(null==(i=d.registerForm.get("contrasena"))?null:i.invalid)&&(null==(i=d.registerForm.get("contrasena"))?null:i.touched)),e.R7$(5),e.Y8G("ngIf",(null==(c=d.registerForm.get("nom_user"))?null:c.invalid)&&(null==(c=d.registerForm.get("nom_user"))?null:c.touched)),e.R7$(5),e.Y8G("ngIf",(null==(u=d.registerForm.get("ap_user"))?null:u.invalid)&&(null==(u=d.registerForm.get("ap_user"))?null:u.touched))}}function x(t,l){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"h2"),e.EFF(2,"Gesti\xf3n de Proveedores"),e.k0s(),e.j41(3,"ion-item",10)(4,"ion-label"),e.EFF(5," Rut "),e.k0s(),e.j41(6,"ion-label"),e.EFF(7," Nombre "),e.k0s(),e.j41(8,"ion-label"),e.EFF(9," Apellido "),e.k0s(),e.j41(10,"ion-label",11),e.EFF(11," Correo "),e.k0s()(),e.j41(12,"ion-list"),e.DNE(13,b,14,5,"ion-item",12),e.k0s(),e.j41(14,"ion-item")(15,"div")(16,"ion-button",3),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.toggleCrudForm())}),e.EFF(17),e.k0s()()(),e.j41(18,"ion-card")(19,"ion-card-header")(20,"ion-card-title"),e.EFF(21,"Formulario de Registro de Proveedor"),e.k0s()(),e.j41(22,"ion-card-content"),e.DNE(23,y,33,7,"form",13),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(13),e.Y8G("ngForOf",n.proveedores),e.R7$(4),e.SpI(" ",n.showCrudForm?"Cancelar":"Agregar Proveedor"," "),e.R7$(6),e.Y8G("ngIf",n.showCrudForm)}}function R(t,l){1&t&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Configuraci\xf3n"),e.k0s(),e.j41(3,"p"),e.EFF(4,"Aqu\xed puedes cambiar configuraciones del sistema, como ajustes generales o permisos."),e.k0s()())}const S=[{path:"",component:(()=>{var t;class l{constructor(o,r,i,c,u){this.authService=o,this.proveedorService=r,this.router=i,this.toast=c,this.fb=u,this.currentSection="dashboard",this.proveedores=[],this.item={rut:"",dv:"",correo_electronico:"",contrasena:"",nombre:"",apellido:""},this.showCrudForm=!1,this.registerForm=this.fb.group({rut:["",[s.k0.required,s.k0.pattern("^[0-9]{7,8}$")]],dv:["",[s.k0.required,s.k0.pattern("^[0-9kK]{1}$")]],correo_electronico:["",[s.k0.required,s.k0.email]],contrasena:["",[s.k0.required,s.k0.minLength(8)]],nombre:["",[s.k0.required,s.k0.pattern("^[a-zA-Z ]+$")]],apellido:["",[s.k0.required,s.k0.pattern("^[a-zA-Z ]+$")]]})}ngOnInit(){this.loadProveedores()}setSection(o){this.currentSection=o}onLogout(){var o=this;return(0,g.A)(function*(){const r=localStorage.getItem("authToken"),i=new f.Lr({Authorization:`Token ${r}`});o.authService.logout(i).subscribe(function(){var c=(0,g.A)(function*(u){(yield o.toast.create({message:"Has cerrado sesi\xf3n correctamente.",duration:2e3})).present(),localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("user_data"),localStorage.removeItem("rut"),o.router.navigate(["/login"])});return function(u){return c.apply(this,arguments)}}(),function(){var c=(0,g.A)(function*(u){console.error("Error al cerrar sesi\xf3n:",u),(yield o.toast.create({message:"Error al cerrar sesi\xf3n. Intenta de nuevo.",duration:2e3})).present()});return function(u){return c.apply(this,arguments)}}())})()}loadProveedores(){this.proveedorService.getProveedores().subscribe(o=>{this.proveedores=o},o=>{console.error("Error al cargar proveedores",o)})}toggleCrudForm(){this.showCrudForm=!this.showCrudForm}onSubmit(){var o=this;return(0,g.A)(function*(){var r;o.item.rut&&o.item.dv&&o.item.correo_electronico&&o.item.contrasena&&o.item.nombre&&o.item.apellido?o.authService.registerProveedor(o.item).subscribe({next:(r=(0,g.A)(function*(i){console.log("Proveedor registrado exitosamente",i),o.proveedores.push(i),o.resetForm(),(yield o.toast.create({message:"Proveedor registrado correctamente",duration:2e3})).present()}),function(c){return r.apply(this,arguments)}),error:function(){var r=(0,g.A)(function*(i){console.error("Error al registrar proveedor",i),(yield o.toast.create({message:"Error al registrar el proveedor. Intente nuevamente.",duration:2e3})).present()});return function(c){return r.apply(this,arguments)}}()}):(yield o.toast.create({message:"Rellene los campos obligatorios",duration:2e3})).present()})()}resetForm(){this.item={rut:"",dv:"",correo_electronico:"",contrasena:"",nombre:"",apellido:""}}onEdit(o){this.item={...o}}onDelete(o){this.proveedorService.deleteProveedor(o.rut).subscribe(()=>{this.proveedores=this.proveedores.filter(r=>r!==o)},r=>{console.error("Error al eliminar el proveedor",r)})}}return(t=l).\u0275fac=function(o){return new(o||t)(e.rXU(F.P),e.rXU(P.m),e.rXU(p.Ix),e.rXU(a.K_),e.rXU(s.ok))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-panel-administrador"]],decls:28,vars:3,consts:[["contentId","adminContent"],["side","start","menuId","mainMenu","contentId","adminContent"],["color","primary"],[3,"click"],["slot","start","name","home-outline"],["slot","start","name","people-outline"],["slot","start","name","settings-outline"],["slot","start","name","log-out-outline"],["id","adminContent",1,"main-content"],[4,"ngIf"],[1,"titulo-label"],[1,"precio"],[4,"ngFor","ngForOf"],["novalidate","",3,"formGroup",4,"ngIf"],[1,"aumentar-disminuir"],["novalidate","",3,"formGroup"],["position","stacked"],["size","9"],["type","text","formControlName","rut","placeholder","12345678"],["size","3"],["type","text","formControlName","dv","placeholder","0"],["type","email","formControlName","correo_electronico"],["type","password","formControlName","contrasena"],["type","text","formControlName","nom_user"],["type","text","formControlName","ap_user"],["expand","full","type","submit",3,"click"],["color","danger"]],template:function(o,r){1&o&&(e.j41(0,"ion-split-pane",0)(1,"ion-menu",1)(2,"ion-header")(3,"ion-toolbar",2)(4,"ion-title"),e.EFF(5,"Men\xfa"),e.k0s()()(),e.j41(6,"ion-content")(7,"ion-list")(8,"ion-item",3),e.bIt("click",function(){return r.setSection("dashboard")}),e.nrm(9,"ion-icon",4),e.j41(10,"ion-label"),e.EFF(11,"Dashboard"),e.k0s()(),e.j41(12,"ion-item",3),e.bIt("click",function(){return r.setSection("proveedores")}),e.nrm(13,"ion-icon",5),e.j41(14,"ion-label"),e.EFF(15,"Proveedores"),e.k0s()(),e.j41(16,"ion-item",3),e.bIt("click",function(){return r.setSection("configuracion")}),e.nrm(17,"ion-icon",6),e.j41(18,"ion-label"),e.EFF(19,"Configuraci\xf3n"),e.k0s()(),e.j41(20,"ion-item",3),e.bIt("click",function(){return r.onLogout()}),e.nrm(21,"ion-icon",7),e.j41(22,"ion-label"),e.EFF(23,"Cerrar Sesi\xf3n"),e.k0s()()()()(),e.j41(24,"ion-content",8),e.DNE(25,k,5,0,"div",9)(26,x,24,3,"div",9)(27,R,5,0,"div",9),e.k0s()()),2&o&&(e.R7$(25),e.Y8G("ngIf","dashboard"===r.currentSection),e.R7$(),e.Y8G("ngIf","proveedores"===r.currentSection),e.R7$(),e.Y8G("ngIf","configuracion"===r.currentSection))},dependencies:[_.Sq,_.bT,s.qT,s.BC,s.cb,a.Jm,a.b_,a.I9,a.ME,a.tN,a.hU,a.W9,a.eU,a.iq,a.$w,a.uz,a.he,a.nf,a.oS,a.ln,a.HP,a.IO,a.BC,a.ai,a.Gw,s.j4,s.JD],styles:['@charset "UTF-8";ion-toolbar[_ngcontent-%COMP%]{--background: #3880ff;color:#fff}ion-buttons[_ngcontent-%COMP%]{color:#fff}ion-menu[_ngcontent-%COMP%]{--width: 80%}@media (min-width: 768px){ion-menu[_ngcontent-%COMP%]{--width: 250px;display:block}.main-content[_ngcontent-%COMP%]{margin-left:250px}ion-menu-button[_ngcontent-%COMP%]{display:none}}']}),l})()}];let T=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(S),p.iI]}),l})(),$=(()=>{var t;class l{}return(t=l).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[_.MD,s.YN,a.bv,T,s.X1]}),l})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4163],{4163:(N,_,u)=>{u.r(_),u.d(_,{LoginPageModule:()=>G});var v=u(177),r=u(4341),d=u(4742),p=u(6766),m=u(467),e=u(3953),h=u(459),F=u(8513);function k(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," El nombre de usuario o RUT es obligatorio. "),e.k0s())}function b(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," La contrase\xf1a es obligatoria y debe tener entre 8 y 12 caracteres. "),e.k0s())}function x(t,s){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"form",9),e.bIt("ngSubmit",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.login())}),e.j41(2,"h2",10),e.EFF(3,"Inicio de sesi\xf3n"),e.k0s(),e.j41(4,"div",11)(5,"label",12),e.EFF(6,"Nombre de Usuario o RUT"),e.k0s(),e.nrm(7,"ion-input",13),e.DNE(8,k,2,0,"div",14),e.k0s(),e.j41(9,"div",11)(10,"label",12),e.EFF(11,"Contrase\xf1a"),e.k0s(),e.j41(12,"ion-input",15)(13,"ion-icon",16),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.togglePasswordVisibility("login"))}),e.k0s()(),e.DNE(14,b,2,0,"div",14),e.k0s(),e.j41(15,"ion-button",17),e.EFF(16,"Login"),e.k0s(),e.j41(17,"div",18)(18,"span",19),e.EFF(19,"\xbfNo tienes cuenta?"),e.k0s(),e.j41(20,"ion-button",20),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.handleButtonClick())}),e.EFF(21,"Reg\xedstrate aqu\xed"),e.k0s()()()()}if(2&t){let i,o;const n=e.XpG();e.R7$(),e.Y8G("formGroup",n.loginForm),e.R7$(7),e.Y8G("ngIf",(null==(i=n.campo("username"))?null:i.invalid)&&n.campoTocado("username")),e.R7$(4),e.Y8G("type",n.showPasswordLogin?"text":"password"),e.R7$(),e.Y8G("name",n.showPasswordLogin?"eye-off":"eye"),e.R7$(),e.Y8G("ngIf",(null==(o=n.campo("password"))?null:o.invalid)&&n.campoTocado("password"))}}function P(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," El RUT es obligatorio. "),e.k0s())}function y(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," El DV es obligatorio. "),e.k0s())}function w(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," El correo es obligatorio y debe ser v\xe1lido. "),e.k0s())}function j(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," La contrase\xf1a es obligatoria y debe tener al menos 8 caracteres. "),e.k0s())}function E(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," El nombre es obligatorio y debe contener solo letras. "),e.k0s())}function L(t,s){1&t&&(e.j41(0,"div",21),e.EFF(1," El apellido es obligatorio y debe contener solo letras. "),e.k0s())}function C(t,s){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"form",9),e.bIt("ngSubmit",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onRegister())}),e.j41(2,"h2",22),e.EFF(3,"Reg\xedstrate aqu\xed"),e.k0s(),e.j41(4,"div",11)(5,"label",12),e.EFF(6,"RUT"),e.k0s(),e.j41(7,"div",23)(8,"div",24),e.nrm(9,"ion-input",25),e.k0s(),e.j41(10,"div",26),e.nrm(11,"ion-input",27),e.k0s()(),e.DNE(12,P,2,0,"div",14)(13,y,2,0,"div",14),e.k0s(),e.j41(14,"div",11)(15,"label",12),e.EFF(16,"Correo Electr\xf3nico"),e.k0s(),e.nrm(17,"ion-input",28),e.DNE(18,w,2,0,"div",14),e.k0s(),e.j41(19,"div",11)(20,"label",12),e.EFF(21,"Contrase\xf1a"),e.k0s(),e.j41(22,"ion-input",29)(23,"ion-icon",16),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.togglePasswordVisibility("register"))}),e.k0s()(),e.DNE(24,j,2,0,"div",14),e.k0s(),e.j41(25,"div",11)(26,"label",12),e.EFF(27,"Nombre"),e.k0s(),e.nrm(28,"ion-input",30),e.DNE(29,E,2,0,"div",14),e.k0s(),e.j41(30,"div",11)(31,"label",12),e.EFF(32,"Apellido"),e.k0s(),e.nrm(33,"ion-input",31),e.DNE(34,L,2,0,"div",14),e.k0s(),e.j41(35,"ion-button",17),e.EFF(36,"Registrar Proveedor"),e.k0s(),e.j41(37,"div",18)(38,"span",19),e.EFF(39,"\xbfYa tienes cuenta?"),e.k0s(),e.j41(40,"ion-button",20),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.handleButtonClick())}),e.EFF(41,"Inicia sesi\xf3n aqu\xed"),e.k0s()()()()}if(2&t){let i,o,n,c,l,g;const a=e.XpG();e.R7$(),e.Y8G("formGroup",a.registerForm),e.R7$(11),e.Y8G("ngIf",(null==(i=a.registerForm.get("rut"))?null:i.invalid)&&(null==(i=a.registerForm.get("rut"))?null:i.touched)),e.R7$(),e.Y8G("ngIf",(null==(o=a.registerForm.get("dv"))?null:o.invalid)&&(null==(o=a.registerForm.get("dv"))?null:o.touched)),e.R7$(5),e.Y8G("ngIf",(null==(n=a.registerForm.get("correo_electronico"))?null:n.invalid)&&(null==(n=a.registerForm.get("correo_electronico"))?null:n.touched)),e.R7$(4),e.Y8G("type",a.showPasswordRegister?"text":"password"),e.R7$(),e.Y8G("name",a.showPasswordRegister?"eye-off":"eye"),e.R7$(),e.Y8G("ngIf",(null==(c=a.registerForm.get("contrasena"))?null:c.invalid)&&(null==(c=a.registerForm.get("contrasena"))?null:c.touched)),e.R7$(5),e.Y8G("ngIf",(null==(l=a.registerForm.get("nom_user"))?null:l.invalid)&&(null==(l=a.registerForm.get("nom_user"))?null:l.touched)),e.R7$(5),e.Y8G("ngIf",(null==(g=a.registerForm.get("ap_user"))?null:g.invalid)&&(null==(g=a.registerForm.get("ap_user"))?null:g.touched))}}const R=[{path:"",component:(()=>{var t;class s{handleButtonClick(){this.toggleCrudForm(),this.toggleLoginForm()}togglePasswordVisibility(o){"login"===o?this.showPasswordLogin=!this.showPasswordLogin:"register"===o&&(this.showPasswordRegister=!this.showPasswordRegister)}constructor(o,n,c,l,g){this.router=o,this.authservice=n,this.proveedorService=c,this.formBuilder=l,this.toast=g,this.username="",this.password="",this.proveedores=[],this.item={rut:"",dv:"",correo_electronico:"",contrasena:"",nom_user:"",ap_user:""},this.showCrudForm=!0,this.showLoginForm=!1,this.showPasswordLogin=!1,this.showPasswordRegister=!1,this.loginForm=this.formBuilder.group({username:["",[r.k0.required]],password:["",[r.k0.required,r.k0.minLength(8),r.k0.maxLength(12)]]}),this.registerForm=this.formBuilder.group({rut:["",[r.k0.required,r.k0.pattern("^[0-9]+$"),r.k0.minLength(7),r.k0.maxLength(8)]],dv:["",[r.k0.required,r.k0.pattern("^[0-9Kk]{1}$")]],correo_electronico:["",[r.k0.required,r.k0.email]],contrasena:["",[r.k0.required,r.k0.minLength(8)]],nom_user:["",[r.k0.required,r.k0.pattern("^[a-zA-Z\xf1\xd1]+$")]],ap_user:["",[r.k0.required,r.k0.pattern("^[a-zA-Z\xf1\xd1]+$")]]})}ngOnInit(){}campo(o){return this.loginForm.get(o)}campoTocado(o){var n;return null===(n=this.loginForm.get(o))||void 0===n?void 0:n.touched}toggleLoginForm(){this.showLoginForm=!this.showLoginForm,this.showLoginForm||(this.loginForm.reset(),this.loginForm.updateValueAndValidity())}login(){var o=this;return(0,m.A)(function*(){if(o.loginForm.invalid)return void(yield o.toast.create({message:"Rellene los campos",position:"top",duration:2e3})).present();const{username:n,password:c}=o.loginForm.value;o.authservice.login(n,c).subscribe(function(){var l=(0,m.A)(function*(g){if(g){const f=g.user.rol,T={rol:f};localStorage.setItem("authToken",g.token),localStorage.setItem("user_data",JSON.stringify(T)),yield(yield o.toast.create({header:"Bienvenido Usuario",position:"top",duration:2e3})).present(),o.router.navigate("admin"===f?["/panel-administrador"]:"proveedor"===f?["/panel-proveedor"]:["/home"]),o.loginForm.reset(),o.loginForm.updateValueAndValidity()}});return function(g){return l.apply(this,arguments)}}(),function(){var l=(0,m.A)(function*(g){console.error("Error en el login",g),(yield o.toast.create({message:"Error en el inicio de sesi\xf3n",position:"top",duration:2e3})).present()});return function(g){return l.apply(this,arguments)}}())})()}toggleCrudForm(){this.showCrudForm=!this.showCrudForm,this.showCrudForm||(this.registerForm.reset(),this.registerForm.updateValueAndValidity())}onRegister(){var o=this;return(0,m.A)(function*(){var n;o.registerForm.invalid?(yield o.toast.create({message:"Rellene los campos",position:"top",duration:2e3})).present():o.authservice.registerProveedor(o.registerForm.value).subscribe({next:(n=(0,m.A)(function*(c){console.log("Proveedor registrado exitosamente",c),o.registerForm.reset(),o.registerForm.updateValueAndValidity(),(yield o.toast.create({message:"Proveedor registrado correctamente",position:"top",duration:2e3})).present()}),function(l){return n.apply(this,arguments)}),error:function(){var n=(0,m.A)(function*(c){console.error("Error al registrar proveedor",c),(yield o.toast.create({message:"Error al registrar el proveedor. Intente nuevamente.",position:"top",duration:2e3})).present()});return function(l){return n.apply(this,arguments)}}()})})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.rXU(p.Ix),e.rXU(h.P),e.rXU(F.m),e.rXU(r.ok),e.rXU(d.K_))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:20,vars:2,consts:[[1,"bigimage"],[1,"container",2,"max-width","500px"],[4,"ngIf"],[1,"footer"],[1,"containerw"],[1,"float-end"],["href","#",1,"back-to-top"],[1,"footer-text"],["href","#"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-4","titular","text-center"],[1,"form-group","mb-3"],[1,"label","mb-2"],["formControlName","username","placeholder","Ingrese su usuario o RUT",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","password",1,"form-control",3,"type"],["slot","end",2,"cursor","pointer",3,"click","name"],["color","a","type","submit","expand","block"],[1,"text-center","mt-3"],[2,"color","black","font-weight","bold"],["color","a",3,"click"],[1,"text-danger"],[1,"mb-4","titulardo","text-center"],[1,"row"],[1,"col-9"],["type","text","formControlName","rut","placeholder","12345678",1,"form-control"],[1,"col-3"],["type","text","formControlName","dv","placeholder","0",1,"form-control"],["type","email","formControlName","correo_electronico",1,"form-control"],["formControlName","contrasena",1,"form-control",3,"type"],["type","text","formControlName","nom_user",1,"form-control"],["type","text","formControlName","ap_user",1,"form-control"]],template:function(o,n){1&o&&(e.j41(0,"ion-content")(1,"div",0)(2,"div",1),e.DNE(3,x,22,5,"div",2)(4,C,42,9,"div",2),e.k0s()(),e.j41(5,"footer",3)(6,"div",4)(7,"p",5)(8,"a",6),e.EFF(9,"Volver arriba"),e.k0s()(),e.j41(10,"p",7),e.EFF(11," \xa9 2024 "),e.j41(12,"strong"),e.EFF(13,"GreenMarket"),e.k0s(),e.EFF(14," Portafolio. "),e.j41(15,"a",8),e.EFF(16,"Privacidad"),e.k0s(),e.EFF(17," \xb7 "),e.j41(18,"a",8),e.EFF(19,"T\xe9rminos"),e.k0s()()()()()),2&o&&(e.R7$(3),e.Y8G("ngIf",n.showLoginForm),e.R7$(),e.Y8G("ngIf",!n.showLoginForm))},dependencies:[v.bT,r.qT,r.BC,r.cb,d.Jm,d.W9,d.iq,d.$w,d.Gw,r.j4,r.JD],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#72bf78;border-radius:20px;height:780px;width:100%}.bigimage[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:#f5f5f5;background-repeat:repeat;background-position:center center;background-size:cover;background-attachment:scroll;top:0;left:0}.btn[_ngcontent-%COMP%]{color:#000;background:#a0d683;background-color:#a0d683}ion-button[_ngcontent-%COMP%]{color:#000;font-weight:700;background:#a0d683;background-color:#feff9f}.titular[_ngcontent-%COMP%]{background-color:#a0d683;color:#000;width:320px;height:60px;display:flex;justify-content:center;align-items:center;font-weight:700;text-align:center;position:relative;font-family:Bebas Neue,sans-serif;top:10px;font-size:40px;box-shadow:0 10px 10px #0000001a}.titulardo[_ngcontent-%COMP%]{background-color:#a0d683;color:#000;width:320px;height:60px;display:flex;justify-content:center;align-items:center;font-weight:700;position:relative;font-family:Bebas Neue,sans-serif;top:10px;font-size:40px;box-shadow:0 10px 10px #0000001a}.ajustar[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center}.centrar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.btn-link[_ngcontent-%COMP%]{background-color:#ff9}.label[_ngcontent-%COMP%]{align-self:flex-start;color:#000;font-weight:600;font-weight:700;font-size:18px}.form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{padding:1rem .75rem;width:100%;display:flex;align-items:center;gap:.5rem;border-radius:3rem;background-color:#ff9;color:var(--bg-light);border:none;cursor:pointer;color:#000;font-size:18px;transition:all .3s;font-weight:700;font-size:.9rem}.span[_ngcontent-%COMP%]{text-decoration:none;color:red;opacity:70%}ion-input[_ngcontent-%COMP%]{background-color:#a0d683;font-size:large;font-weight:700;color:#000}.footer[_ngcontent-%COMP%]{background:#72bf78;color:#000;text-align:center;padding:20px 0;box-shadow:0 -4px 10px #0000001a}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#feff9f;text-decoration:none;font-weight:700}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.footer-text[_ngcontent-%COMP%]{font-size:14px;margin:0}.footer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#a0d683}.back-to-top[_ngcontent-%COMP%]{background-color:#a0d683;color:#000;padding:8px 12px;border-radius:5px;font-size:12px;font-weight:700;text-decoration:none;transition:all .3s}.back-to-top[_ngcontent-%COMP%]:hover{background-color:#feff9f;color:#000}']}),s})()}];let M=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(R),p.iI]}),s})(),G=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[v.MD,r.YN,d.bv,M,r.X1]}),s})()}}]);